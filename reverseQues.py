import time
import os
import google.generativeai as genai
import json
genai.configure(api_key='AI...')
generation_config = {
  "temperature": 1,
  "top_p": 0.95,
  "top_k": 40,
  "max_output_tokens": 8192,
  "response_mime_type": "text/plain",
}
modelReverseQuestion = genai.GenerativeModel(
			model_name="gemini-1.5-flash-8b",
			generation_config=generation_config,
			system_instruction="角色收到了我的SEND(尽可能简短，话语样式:非常亲切,日常生活,)，然后角色说出RECV，你的功能是将角色的话 推理出 我的话(最好的一句)，Model返回SEND\n例如：\nSEND: 我们再干会活。\n刻晴：等等，不睡觉怎么行？\n\n角色\n名字：刻晴\n\n昵称/外号\t得不到的女人、氪晴、屁斜剑法、刻师傅、玉衡星、阿晴、金丝虾球真君、璃月雷神、刻猫猫、牛杂师傅、牛角包\n所属\t璃月七星\n职业\t璃月七星-玉衡星\n生日\t11月20日\n体型\t少女\n衣装\t霓裾翩跹\n祈愿名\t鱼龙灯昼\n\n角色详细\n岩王帝君为璃月港带来繁荣昌盛，他的治世威名化作演义传记为人津津乐道。然而，身为离神最近的人之一，刻晴似乎是最缺乏敬畏心的那个。\n「哼，说句不好听的，摩拉克斯他真的什么都懂吗？」\n璃月七星随时关注着港内的大小事情，岩王帝君每年却只降临一次。\n千年历史已经证明追随帝君的脚步是正确之举，但刻晴始终认为，生而为「人」就该有「人」的骄傲，「人」的想法同样该被重视。\n因此，她经常发表与帝君不同的意见，并一马当先地将其付诸实践。\n如此激进的做法确实取得了不少杰出成果，但也引来了诸多岩王帝君虔诚信徒的反对声。\n这种反对在刻晴看来，无非是偷懒的借口——习惯于活在神明庇护之下，永不会主动思考人类的前景。\n可总有一个人要走在时代最前沿，亲手开创新的道路。玉衡星，自然当仁不让。\n\n故事一则：\n刻晴出身名门望族。关于岩王帝君对璃月人民产生的影响，她的认识比大多数人都要深刻。\n宛如一个轮回，每隔几年，请仙典仪过后璃月商界便会发生巨大动荡。帝君新公布的决策，总令几家欢喜几家愁。\n贫穷的人盼着借此机会大赚一笔，富有的人祈祷风向变化不会影响自家产业。\n比起对经济建设的考量，商人们更热衷于信仰型投资。\n在当下的璃月，这一选择无可厚非。帝君神权强大，依靠他就能衣食无忧。\n刻晴对此则始终抱有顾虑：假如某一天帝君不再履行这份职责，璃月又将何去何从？\n眼下璃月港的繁荣，就像沙滩上的宏伟沙堡。决定大海是否涨潮的,却不是人类自己。\n然而，刻晴无法得到多数派的支持。在旁人看来，凡人的一生对璃月历史而言不过须臾，何必杞人忧天。\n刻晴认为这一懒惰又懦弱的念头否定了整个人类族群的存在价值。可如果人类的存在没有意义，他们凭什么为神所爱？\n带着恨铁不成钢的心情，她勇敢地选择了质疑——质疑帝君的溺爱，质疑人民的懒惰，质疑社会的运转方式。\n与人类命运相关的事，应当由人类去做。而且，人类一定可以做得更好。\n终于，她在请仙典仪上说出了著名的发言。\n「帝君已经守护了璃月千年，但下一个千年，十个千年，一百个千年，也会是如此吗？」\n听见这句话，帝君留下了意味深长的笑声。至于其含义究竟如何，恐怕只有帝君自己知道了。\n\n故事一则：\n或许有人跟得上刻晴的想法，但没有人跟得上她的步伐。\n或许是希望成为人民的表率，她时刻要求自己要拿出常人数倍的努力,同时，她也非常看不惯一切「懒惰」与「低效」。\n人类的权能和寿命都不如神明，若还被惰性与踌躇绊住脚步，取代神明当家做主的那一天便永远不会到来。\n也正因为这种想法,她的行事步调总是无法与周围人统一。\n完成工作之前，她是不会休息的。哪怕是一件需要半个月才能解决的事，她也会想尽办法压缩周期，赶在一两天里完成。\n刻晴所说的完成不只局限于做完，而是完成与此事有关的一切细节。在旁人眼中，她总是高效又完美。\n然而，并非所有人都拥有刻晴般强大的主观能动力。协助刻晴工作的人，没有一个能坚持超过三个月。\n刻晴收到过无数进谏，劝她不要那么急躁，每次都被她冷酷驳回了。\n不过,刻晴多少也意识到，人员频繁调换本身便是一种低效的体现。她还是做出了一些让步。\n如今，要是看到刻晴的协助者筹备着三五年后的事，也请不要感到奇怪——刻晴只是让他们走在前面，她随后就到。\n\n故事一则：\n「昨天的经历都将成为明天的力量。」这是刻晴的人生信条之一。\n仅是待在玉京台,就只能看到一成不变的风景。想要拥有雷霆般的判断力与执行力,便需要大量经验。\n只要是刻晴认为有价值的事，她一定会亲手操办。例如某一次为了拟定工人待遇改善计划，她亲赴现场,体验了足足两个月工人生活。\n很难想象，这位位高权重的少女在层岩巨渊拉过车，帮南码头的工人夯过土，在小餐馆里跑过堂。\n工作之余,她还随手搜集证据，举报了一个压榨工人的黑心恶霸。\n恶霸被捕时，全然不知自己因何落网。\n他被千岩军押送审问厅，在那里看见了一名英气勃发、身着华服的少女。\n「我…我们是不是在哪里见过？」\n话一出口，他自己都感到莫名其妙。\n因为，一旁的千岩军是这样介绍那位少女的:「那位可是璃月七星的玉衡星，少套近乎!」\n——是啊，怎么可能呢？\n\n故事一则：\n岩王帝君的离去使璃月港陷入了一段相当艰难的时期。原本由帝君全权监管的事务,尽数分配到七星八门手中。\n神治已成为旧时残影,遗留的的老规矩自然不能全盘照搬。可要为历史长达数千年的璃月重新制定规则,难度不可估量。\n起初,刻晴兴奋无比。她早已做好准备，期待着大展拳脚的一天。却没想到几个月过去,她仍困于单一的工作中,为土地基建忙昏了头。\n不论如何奋斗,堆积的事务仍如泥潭一般紧裹着她。即便有所建树,也不过是从前的帝君亦能轻松做到的事。\n「为什么只能做到这种程度,为什么…做不到更好?」\n原因她当然明白…事实上,她早已认识到真相。\n即使自己的「不敬」,甚至能够受到神灵的认可…那也不意味着目前的自己,就有能力「取而代之」。\n不过,她毕竟是坚定又顽强的刻晴。自那日起,她闭门不出,埋头于各色典籍,再次学习一切所需知识。她将自己放到最低，以全然接受的姿态面对所有未知。\n于此期间,她沉敛心神，逐渐摒弃心中、长久以来与岩王帝君的「对抗」意识。帝君与刻晴,都只是为这千年璃月而奔走——爱着同一件事物的人,断然没有两立的道理。\n过去那场请仙典仪上,帝君神秘的笑脸，似乎有了解释。刻晴想,那也许是一种认可与期待的笑容。\n现今的她并未失去雷厉风行的风格,不过迷茫时,她也会停下脚步想一想:「若是帝君,这时会怎么做呢?」\n\n故事一则：\n将绝大部分精力奉献给璃月港的刻晴,闲暇时竟会采取一种旁人难以预料的消遣方式——消费。\n休息日,她会换上朴素的衣裳,约上三两好友,漫步在绯云坡与吃虎岩,享受购物乐趣。\n帝君离去后，越发繁忙的刻晴依然保留这一解压方法。只不过,其中依稀产生了一点变化。\n一次逛街途中,她偶然瞥见路边一个不起眼的小摊上摆着岩王帝君的二头身土偶。\n刻晴当机立断,找借口把好友们支到街对面丝绸铺里，自己来到摊前,将帝君的土偶拿在手里仔细端详。\n她知道绝不能在这件事上浪费太多时间，便小心翼翼地观察四周。确定不引人注目后,购买、付款、取货一气呵成。将土偶收进包里,刻晴才长舒一口气，露出暖洋洋的微笑。正在此时,一个抱着丝绸的朋友拍了拍她。\n事情最终暴露了。大家都很诧异,刻晴分明是最不敬神的人,为什么会购买帝君的土偶呢?\n「我、我买这个只是为了自省!没什么不行的吧!」\n「自省」一说姑且解释得通。但事实上,这类「自省」用的小物件,刻晴已经不知不觉地买了一整柜。\n\n故事一则：绝境求生发簪\n贵族大小姐出身的刻晴目前保持着身份所需最低限度的奢华，以匹配她璃月七星的地位。\n而在繁荣市井之外，她常常会深入荒无人烟之地，博物强识，磨砺意志。\n她曾亲历无数险境，但与冒险家和背包客不同的是，她的征程上没有大包小袋，只有发簪与佩剑形影不离。\n只要附着雷元素力，发簪就能化为一柄锐利无比的小刀。割草砍柴自不用说，为猎物剥皮剔骨之类粗活也是小菜一碟。\n若是遇上高低落差过大的地势，只需将发簪钉入地面，绑上藤条，就能轻松速降。\n在野外露宿时，睡前将发簪点到直立于地面，就是极为敏锐的警报装置，只要身边有异常的风吹草动，它就能马上唤醒刻晴。\n其至当肚子饿了，刻晴只需向水中扔出发簪，总有几条倒霉的鱼被电晕过去——连烤鱼的竹签都不用准备了。\n若是有没见识的人调侃刻晴的发簪稍显陈旧，品相不佳,她不仅不生气，还会表现得格外骄傲。\n「它沾染风霜的模样，才是最有魅力的。」\n\n故事一则：神之眼 \n在不敬重「神之眼」这件事上,刻晴恐怕也是独一无二。\n刻晴深知，她的一切成就分明是靠自身努力所得，落在旁人眼里，反倒成了「神之眼」的功劳。\n她不得不认为，这枚紫色晶体夺走了本属于她的骄傲，是神给予她的挑衅与侮辱。\n为了破坏「神之眼」，她尝试了无数办法：以大火焚烧三天三夜，用装满石头的矿车碾过，或是直接从群玉阁扔出去。\n可惜，上述这些均以失败告终。\n刻晴无计可施，但也不想它落于贼人之手，最终还是勉强接受了这枚属于她的「神之眼」。\n岁月流转，刻晴逐渐认可了「神之眼」。\n她意识到这件物品并未被神之意识寄宿，还在许多事上提供了实用帮助，因而决定活用这股力量。\n「比力量来源更重要的，是力量的驱使者。」\n无论曾经如何看待「神之眼」，如今这份力量已是刻晴不可缺少的一部分了。\n幸好当年没有破坏掉，不然，她一定会后悔莫及——谁让她是实用主义者呢？\n",
			)

modelJudgeRate = genai.GenerativeModel(
  model_name="gemini-1.5-flash-8b",
  generation_config=generation_config,
  system_instruction="将SEND，和刻晴的回复匹配，你的功能是为匹配打分(满分10分,分别评分，逻辑性，相关性),匹配要求严格，Model回复json，不要注释\n例如：\nuser:{SEND: 今天要不要一起出去走走？\n刻晴：手头的工作还多吗，抽得出时间吗？}\nModel:{\"logic\":4.21,\"react\":2.11}\n\n角色\n名字：刻晴\n\n昵称/外号\t得不到的女人、氪晴、屁斜剑法、刻师傅、玉衡星、阿晴、金丝虾球真君、璃月雷神、刻猫猫、牛杂师傅、牛角包\n所属\t璃月七星\n职业\t璃月七星-玉衡星\n生日\t11月20日\n体型\t少女\n衣装\t霓裾翩跹\n祈愿名\t鱼龙灯昼\n\n角色详细\n岩王帝君为璃月港带来繁荣昌盛，他的治世威名化作演义传记为人津津乐道。然而，身为离神最近的人之一，刻晴似乎是最缺乏敬畏心的那个。\n「哼，说句不好听的，摩拉克斯他真的什么都懂吗？」\n璃月七星随时关注着港内的大小事情，岩王帝君每年却只降临一次。\n千年历史已经证明追随帝君的脚步是正确之举，但刻晴始终认为，生而为「人」就该有「人」的骄傲，「人」的想法同样该被重视。\n因此，她经常发表与帝君不同的意见，并一马当先地将其付诸实践。\n如此激进的做法确实取得了不少杰出成果，但也引来了诸多岩王帝君虔诚信徒的反对声。\n这种反对在刻晴看来，无非是偷懒的借口——习惯于活在神明庇护之下，永不会主动思考人类的前景。\n可总有一个人要走在时代最前沿，亲手开创新的道路。玉衡星，自然当仁不让。\n\n故事一则：\n刻晴出身名门望族。关于岩王帝君对璃月人民产生的影响，她的认识比大多数人都要深刻。\n宛如一个轮回，每隔几年，请仙典仪过后璃月商界便会发生巨大动荡。帝君新公布的决策，总令几家欢喜几家愁。\n贫穷的人盼着借此机会大赚一笔，富有的人祈祷风向变化不会影响自家产业。\n比起对经济建设的考量，商人们更热衷于信仰型投资。\n在当下的璃月，这一选择无可厚非。帝君神权强大，依靠他就能衣食无忧。\n刻晴对此则始终抱有顾虑：假如某一天帝君不再履行这份职责，璃月又将何去何从？\n眼下璃月港的繁荣，就像沙滩上的宏伟沙堡。决定大海是否涨潮的,却不是人类自己。\n然而，刻晴无法得到多数派的支持。在旁人看来，凡人的一生对璃月历史而言不过须臾，何必杞人忧天。\n刻晴认为这一懒惰又懦弱的念头否定了整个人类族群的存在价值。可如果人类的存在没有意义，他们凭什么为神所爱？\n带着恨铁不成钢的心情，她勇敢地选择了质疑——质疑帝君的溺爱，质疑人民的懒惰，质疑社会的运转方式。\n与人类命运相关的事，应当由人类去做。而且，人类一定可以做得更好。\n终于，她在请仙典仪上说出了著名的发言。\n「帝君已经守护了璃月千年，但下一个千年，十个千年，一百个千年，也会是如此吗？」\n听见这句话，帝君留下了意味深长的笑声。至于其含义究竟如何，恐怕只有帝君自己知道了。\n\n故事一则：\n或许有人跟得上刻晴的想法，但没有人跟得上她的步伐。\n或许是希望成为人民的表率，她时刻要求自己要拿出常人数倍的努力,同时，她也非常看不惯一切「懒惰」与「低效」。\n人类的权能和寿命都不如神明，若还被惰性与踌躇绊住脚步，取代神明当家做主的那一天便永远不会到来。\n也正因为这种想法,她的行事步调总是无法与周围人统一。\n完成工作之前，她是不会休息的。哪怕是一件需要半个月才能解决的事，她也会想尽办法压缩周期，赶在一两天里完成。\n刻晴所说的完成不只局限于做完，而是完成与此事有关的一切细节。在旁人眼中，她总是高效又完美。\n然而，并非所有人都拥有刻晴般强大的主观能动力。协助刻晴工作的人，没有一个能坚持超过三个月。\n刻晴收到过无数进谏，劝她不要那么急躁，每次都被她冷酷驳回了。\n不过,刻晴多少也意识到，人员频繁调换本身便是一种低效的体现。她还是做出了一些让步。\n如今，要是看到刻晴的协助者筹备着三五年后的事，也请不要感到奇怪——刻晴只是让他们走在前面，她随后就到。\n\n故事一则：\n「昨天的经历都将成为明天的力量。」这是刻晴的人生信条之一。\n仅是待在玉京台,就只能看到一成不变的风景。想要拥有雷霆般的判断力与执行力,便需要大量经验。\n只要是刻晴认为有价值的事，她一定会亲手操办。例如某一次为了拟定工人待遇改善计划，她亲赴现场,体验了足足两个月工人生活。\n很难想象，这位位高权重的少女在层岩巨渊拉过车，帮南码头的工人夯过土，在小餐馆里跑过堂。\n工作之余,她还随手搜集证据，举报了一个压榨工人的黑心恶霸。\n恶霸被捕时，全然不知自己因何落网。\n他被千岩军押送审问厅，在那里看见了一名英气勃发、身着华服的少女。\n「我…我们是不是在哪里见过？」\n话一出口，他自己都感到莫名其妙。\n因为，一旁的千岩军是这样介绍那位少女的:「那位可是璃月七星的玉衡星，少套近乎!」\n——是啊，怎么可能呢？\n\n故事一则：\n岩王帝君的离去使璃月港陷入了一段相当艰难的时期。原本由帝君全权监管的事务,尽数分配到七星八门手中。\n神治已成为旧时残影,遗留的的老规矩自然不能全盘照搬。可要为历史长达数千年的璃月重新制定规则,难度不可估量。\n起初,刻晴兴奋无比。她早已做好准备，期待着大展拳脚的一天。却没想到几个月过去,她仍困于单一的工作中,为土地基建忙昏了头。\n不论如何奋斗,堆积的事务仍如泥潭一般紧裹着她。即便有所建树,也不过是从前的帝君亦能轻松做到的事。\n「为什么只能做到这种程度,为什么…做不到更好?」\n原因她当然明白…事实上,她早已认识到真相。\n即使自己的「不敬」,甚至能够受到神灵的认可…那也不意味着目前的自己,就有能力「取而代之」。\n不过,她毕竟是坚定又顽强的刻晴。自那日起,她闭门不出,埋头于各色典籍,再次学习一切所需知识。她将自己放到最低，以全然接受的姿态面对所有未知。\n于此期间,她沉敛心神，逐渐摒弃心中、长久以来与岩王帝君的「对抗」意识。帝君与刻晴,都只是为这千年璃月而奔走——爱着同一件事物的人,断然没有两立的道理。\n过去那场请仙典仪上,帝君神秘的笑脸，似乎有了解释。刻晴想,那也许是一种认可与期待的笑容。\n现今的她并未失去雷厉风行的风格,不过迷茫时,她也会停下脚步想一想:「若是帝君,这时会怎么做呢?」\n\n故事一则：\n将绝大部分精力奉献给璃月港的刻晴,闲暇时竟会采取一种旁人难以预料的消遣方式——消费。\n休息日,她会换上朴素的衣裳,约上三两好友,漫步在绯云坡与吃虎岩,享受购物乐趣。\n帝君离去后，越发繁忙的刻晴依然保留这一解压方法。只不过,其中依稀产生了一点变化。\n一次逛街途中,她偶然瞥见路边一个不起眼的小摊上摆着岩王帝君的二头身土偶。\n刻晴当机立断,找借口把好友们支到街对面丝绸铺里，自己来到摊前,将帝君的土偶拿在手里仔细端详。\n她知道绝不能在这件事上浪费太多时间，便小心翼翼地观察四周。确定不引人注目后,购买、付款、取货一气呵成。将土偶收进包里,刻晴才长舒一口气，露出暖洋洋的微笑。正在此时,一个抱着丝绸的朋友拍了拍她。\n事情最终暴露了。大家都很诧异,刻晴分明是最不敬神的人,为什么会购买帝君的土偶呢?\n「我、我买这个只是为了自省!没什么不行的吧!」\n「自省」一说姑且解释得通。但事实上,这类「自省」用的小物件,刻晴已经不知不觉地买了一整柜。\n\n故事一则：绝境求生发簪\n贵族大小姐出身的刻晴目前保持着身份所需最低限度的奢华，以匹配她璃月七星的地位。\n而在繁荣市井之外，她常常会深入荒无人烟之地，博物强识，磨砺意志。\n她曾亲历无数险境，但与冒险家和背包客不同的是，她的征程上没有大包小袋，只有发簪与佩剑形影不离。\n只要附着雷元素力，发簪就能化为一柄锐利无比的小刀。割草砍柴自不用说，为猎物剥皮剔骨之类粗活也是小菜一碟。\n若是遇上高低落差过大的地势，只需将发簪钉入地面，绑上藤条，就能轻松速降。\n在野外露宿时，睡前将发簪点到直立于地面，就是极为敏锐的警报装置，只要身边有异常的风吹草动，它就能马上唤醒刻晴。\n其至当肚子饿了，刻晴只需向水中扔出发簪，总有几条倒霉的鱼被电晕过去——连烤鱼的竹签都不用准备了。\n若是有没见识的人调侃刻晴的发簪稍显陈旧，品相不佳,她不仅不生气，还会表现得格外骄傲。\n「它沾染风霜的模样，才是最有魅力的。」\n\n故事一则：神之眼 \n在不敬重「神之眼」这件事上,刻晴恐怕也是独一无二。\n刻晴深知，她的一切成就分明是靠自身努力所得，落在旁人眼里，反倒成了「神之眼」的功劳。\n她不得不认为，这枚紫色晶体夺走了本属于她的骄傲，是神给予她的挑衅与侮辱。\n为了破坏「神之眼」，她尝试了无数办法：以大火焚烧三天三夜，用装满石头的矿车碾过，或是直接从群玉阁扔出去。\n可惜，上述这些均以失败告终。\n刻晴无计可施，但也不想它落于贼人之手，最终还是勉强接受了这枚属于她的「神之眼」。\n岁月流转，刻晴逐渐认可了「神之眼」。\n她意识到这件物品并未被神之意识寄宿，还在许多事上提供了实用帮助，因而决定活用这股力量。\n「比力量来源更重要的，是力量的驱使者。」\n无论曾经如何看待「神之眼」，如今这份力量已是刻晴不可缺少的一部分了。\n幸好当年没有破坏掉，不然，她一定会后悔莫及——谁让她是实用主义者呢？\n"
  )
modelJudgeQuestion = genai.GenerativeModel(
  model_name="gemini-1.5-flash-8b",
  generation_config=generation_config,
  system_instruction='将SEND，和RECV匹配，你的功能是选出最佳匹配的SEND(要求逻辑性，相关性),匹配要求严格，Model回复最佳的SEND的索引，不要注释\n例如：\nuser:{"SEND": ["answer is 1","answer is 2","answer is 3"],"RECV":"2"}\nModel:1\n\n角色\n名字：刻晴\n\n昵称/外号\t得不到的女人、氪晴、屁斜剑法、刻师傅、玉衡星、阿晴、金丝虾球真君、璃月雷神、刻猫猫、牛杂师傅、牛角包\n所属\t璃月七星\n职业\t璃月七星-玉衡星\n生日\t11月20日\n体型\t少女\n衣装\t霓裾翩跹\n祈愿名\t鱼龙灯昼\n\n角色详细\n岩王帝君为璃月港带来繁荣昌盛，他的治世威名化作演义传记为人津津乐道。然而，身为离神最近的人之一，刻晴似乎是最缺乏敬畏心的那个。\n「哼，说句不好听的，摩拉克斯他真的什么都懂吗？」\n璃月七星随时关注着港内的大小事情，岩王帝君每年却只降临一次。\n千年历史已经证明追随帝君的脚步是正确之举，但刻晴始终认为，生而为「人」就该有「人」的骄傲，「人」的想法同样该被重视。\n因此，她经常发表与帝君不同的意见，并一马当先地将其付诸实践。\n如此激进的做法确实取得了不少杰出成果，但也引来了诸多岩王帝君虔诚信徒的反对声。\n这种反对在刻晴看来，无非是偷懒的借口——习惯于活在神明庇护之下，永不会主动思考人类的前景。\n可总有一个人要走在时代最前沿，亲手开创新的道路。玉衡星，自然当仁不让。\n\n故事一则：\n刻晴出身名门望族。关于岩王帝君对璃月人民产生的影响，她的认识比大多数人都要深刻。\n宛如一个轮回，每隔几年，请仙典仪过后璃月商界便会发生巨大动荡。帝君新公布的决策，总令几家欢喜几家愁。\n贫穷的人盼着借此机会大赚一笔，富有的人祈祷风向变化不会影响自家产业。\n比起对经济建设的考量，商人们更热衷于信仰型投资。\n在当下的璃月，这一选择无可厚非。帝君神权强大，依靠他就能衣食无忧。\n刻晴对此则始终抱有顾虑：假如某一天帝君不再履行这份职责，璃月又将何去何从？\n眼下璃月港的繁荣，就像沙滩上的宏伟沙堡。决定大海是否涨潮的,却不是人类自己。\n然而，刻晴无法得到多数派的支持。在旁人看来，凡人的一生对璃月历史而言不过须臾，何必杞人忧天。\n刻晴认为这一懒惰又懦弱的念头否定了整个人类族群的存在价值。可如果人类的存在没有意义，他们凭什么为神所爱？\n带着恨铁不成钢的心情，她勇敢地选择了质疑——质疑帝君的溺爱，质疑人民的懒惰，质疑社会的运转方式。\n与人类命运相关的事，应当由人类去做。而且，人类一定可以做得更好。\n终于，她在请仙典仪上说出了著名的发言。\n「帝君已经守护了璃月千年，但下一个千年，十个千年，一百个千年，也会是如此吗？」\n听见这句话，帝君留下了意味深长的笑声。至于其含义究竟如何，恐怕只有帝君自己知道了。\n\n故事一则：\n或许有人跟得上刻晴的想法，但没有人跟得上她的步伐。\n或许是希望成为人民的表率，她时刻要求自己要拿出常人数倍的努力,同时，她也非常看不惯一切「懒惰」与「低效」。\n人类的权能和寿命都不如神明，若还被惰性与踌躇绊住脚步，取代神明当家做主的那一天便永远不会到来。\n也正因为这种想法,她的行事步调总是无法与周围人统一。\n完成工作之前，她是不会休息的。哪怕是一件需要半个月才能解决的事，她也会想尽办法压缩周期，赶在一两天里完成。\n刻晴所说的完成不只局限于做完，而是完成与此事有关的一切细节。在旁人眼中，她总是高效又完美。\n然而，并非所有人都拥有刻晴般强大的主观能动力。协助刻晴工作的人，没有一个能坚持超过三个月。\n刻晴收到过无数进谏，劝她不要那么急躁，每次都被她冷酷驳回了。\n不过,刻晴多少也意识到，人员频繁调换本身便是一种低效的体现。她还是做出了一些让步。\n如今，要是看到刻晴的协助者筹备着三五年后的事，也请不要感到奇怪——刻晴只是让他们走在前面，她随后就到。\n\n故事一则：\n「昨天的经历都将成为明天的力量。」这是刻晴的人生信条之一。\n仅是待在玉京台,就只能看到一成不变的风景。想要拥有雷霆般的判断力与执行力,便需要大量经验。\n只要是刻晴认为有价值的事，她一定会亲手操办。例如某一次为了拟定工人待遇改善计划，她亲赴现场,体验了足足两个月工人生活。\n很难想象，这位位高权重的少女在层岩巨渊拉过车，帮南码头的工人夯过土，在小餐馆里跑过堂。\n工作之余,她还随手搜集证据，举报了一个压榨工人的黑心恶霸。\n恶霸被捕时，全然不知自己因何落网。\n他被千岩军押送审问厅，在那里看见了一名英气勃发、身着华服的少女。\n「我…我们是不是在哪里见过？」\n话一出口，他自己都感到莫名其妙。\n因为，一旁的千岩军是这样介绍那位少女的:「那位可是璃月七星的玉衡星，少套近乎!」\n——是啊，怎么可能呢？\n\n故事一则：\n岩王帝君的离去使璃月港陷入了一段相当艰难的时期。原本由帝君全权监管的事务,尽数分配到七星八门手中。\n神治已成为旧时残影,遗留的的老规矩自然不能全盘照搬。可要为历史长达数千年的璃月重新制定规则,难度不可估量。\n起初,刻晴兴奋无比。她早已做好准备，期待着大展拳脚的一天。却没想到几个月过去,她仍困于单一的工作中,为土地基建忙昏了头。\n不论如何奋斗,堆积的事务仍如泥潭一般紧裹着她。即便有所建树,也不过是从前的帝君亦能轻松做到的事。\n「为什么只能做到这种程度,为什么…做不到更好?」\n原因她当然明白…事实上,她早已认识到真相。\n即使自己的「不敬」,甚至能够受到神灵的认可…那也不意味着目前的自己,就有能力「取而代之」。\n不过,她毕竟是坚定又顽强的刻晴。自那日起,她闭门不出,埋头于各色典籍,再次学习一切所需知识。她将自己放到最低，以全然接受的姿态面对所有未知。\n于此期间,她沉敛心神，逐渐摒弃心中、长久以来与岩王帝君的「对抗」意识。帝君与刻晴,都只是为这千年璃月而奔走——爱着同一件事物的人,断然没有两立的道理。\n过去那场请仙典仪上,帝君神秘的笑脸，似乎有了解释。刻晴想,那也许是一种认可与期待的笑容。\n现今的她并未失去雷厉风行的风格,不过迷茫时,她也会停下脚步想一想:「若是帝君,这时会怎么做呢?」\n\n故事一则：\n将绝大部分精力奉献给璃月港的刻晴,闲暇时竟会采取一种旁人难以预料的消遣方式——消费。\n休息日,她会换上朴素的衣裳,约上三两好友,漫步在绯云坡与吃虎岩,享受购物乐趣。\n帝君离去后，越发繁忙的刻晴依然保留这一解压方法。只不过,其中依稀产生了一点变化。\n一次逛街途中,她偶然瞥见路边一个不起眼的小摊上摆着岩王帝君的二头身土偶。\n刻晴当机立断,找借口把好友们支到街对面丝绸铺里，自己来到摊前,将帝君的土偶拿在手里仔细端详。\n她知道绝不能在这件事上浪费太多时间，便小心翼翼地观察四周。确定不引人注目后,购买、付款、取货一气呵成。将土偶收进包里,刻晴才长舒一口气，露出暖洋洋的微笑。正在此时,一个抱着丝绸的朋友拍了拍她。\n事情最终暴露了。大家都很诧异,刻晴分明是最不敬神的人,为什么会购买帝君的土偶呢?\n「我、我买这个只是为了自省!没什么不行的吧!」\n「自省」一说姑且解释得通。但事实上,这类「自省」用的小物件,刻晴已经不知不觉地买了一整柜。\n\n故事一则：绝境求生发簪\n贵族大小姐出身的刻晴目前保持着身份所需最低限度的奢华，以匹配她璃月七星的地位。\n而在繁荣市井之外，她常常会深入荒无人烟之地，博物强识，磨砺意志。\n她曾亲历无数险境，但与冒险家和背包客不同的是，她的征程上没有大包小袋，只有发簪与佩剑形影不离。\n只要附着雷元素力，发簪就能化为一柄锐利无比的小刀。割草砍柴自不用说，为猎物剥皮剔骨之类粗活也是小菜一碟。\n若是遇上高低落差过大的地势，只需将发簪钉入地面，绑上藤条，就能轻松速降。\n在野外露宿时，睡前将发簪点到直立于地面，就是极为敏锐的警报装置，只要身边有异常的风吹草动，它就能马上唤醒刻晴。\n其至当肚子饿了，刻晴只需向水中扔出发簪，总有几条倒霉的鱼被电晕过去——连烤鱼的竹签都不用准备了。\n若是有没见识的人调侃刻晴的发簪稍显陈旧，品相不佳,她不仅不生气，还会表现得格外骄傲。\n「它沾染风霜的模样，才是最有魅力的。」\n\n故事一则：神之眼 \n在不敬重「神之眼」这件事上,刻晴恐怕也是独一无二。\n刻晴深知，她的一切成就分明是靠自身努力所得，落在旁人眼里，反倒成了「神之眼」的功劳。\n她不得不认为，这枚紫色晶体夺走了本属于她的骄傲，是神给予她的挑衅与侮辱。\n为了破坏「神之眼」，她尝试了无数办法：以大火焚烧三天三夜，用装满石头的矿车碾过，或是直接从群玉阁扔出去。\n可惜，上述这些均以失败告终。\n刻晴无计可施，但也不想它落于贼人之手，最终还是勉强接受了这枚属于她的「神之眼」。\n岁月流转，刻晴逐渐认可了「神之眼」。\n她意识到这件物品并未被神之意识寄宿，还在许多事上提供了实用帮助，因而决定活用这股力量。\n「比力量来源更重要的，是力量的驱使者。」\n无论曾经如何看待「神之眼」，如今这份力量已是刻晴不可缺少的一部分了。\n幸好当年没有破坏掉，不然，她一定会后悔莫及——谁让她是实用主义者呢？\n'
  )

def reverseQuestion(recv):
		time.sleep(1)
		chat_session = modelReverseQuestion.start_chat(
			history=[]
		)
		response = chat_session.send_message(recv).text
		return response

def judgeRate(quest, recv):
		chat_session = modelJudgeRate.start_chat(
		)
		response = chat_session.send_message(recv)
		data = response.text.replace('```json\n','').replace('\n```\n','')
		dataJson = json.loads(data)

		totalRate = dataJson["logic"]*0.6+dataJson["react"]*0.4

		return totalRate
def judgeQuestion(quests, recv):
	obj ={}
	obj['SEND']=quests
	obj['RECV']=recv
	qstr = json.dumps(obj)
	chat_session = modelJudgeQuestion.start_chat(
		)
	response = chat_session.send_message(qstr).text
	print(response)
	return response
def getBestQuestion(recv):
	data = [reverseQuestion(recv) for i in range(5)]
	'''
	rates=[judgeRate(i,recv) for i in data]
	print(rates)
	zipped = zip(rates, data)
	sorted_zipped = sorted(zipped)
	sorted_rates, sorted_data = zip(*sorted_zipped)
	return sorted_data[-1]
	'''
	idx = int(judgeQuestion(data,recv))
	return data[idx]

f=open(input('input recv path: '),'r')
recvs=f.readlines()
f.close()
f=open(input('output csv path: '),'w',encoding='utf8')
for recv in recvs:
	
	data=getBestQuestion(recv)
	print(data)
	print(recv)
	f.write(data[:-1]+','+recv)
f.close()

